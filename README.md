# MySQL_basic_practice
[![alt text](https://img.shields.io/badge/mysql-5.6-green.svg)](https://dev.mysql.com/doc/relnotes/mysql/5.6/en/)
![alt text](https://img.shields.io/badge/result-idea%26query__solution-blue.svg)
[![alt text](https://img.shields.io/badge/data-web-red.svg)](https://www.w3resource.com/mysql-exercises/)

> Í∏∞Ï¥àÏ†ÅÏù∏ Mysql QuizÏóê ÎåÄÌï¥ idea, solution, resultÎ•º Ï†ïÎ¶¨Ìï¥ÎëêÏóàÏäµÎãàÎã§. mysqlÏùÑ remind ÌïòÍ∏∞ ÏúÑÌï¥ ÎßåÎì§ÏóàÏäµÎãàÎã§.

> Ïñ¥Îñ§ Î©¥ÏóêÏÑúÎäî Î¨¥Ï≤ô ÏâΩÏäµÎãàÎã§. ÏøºÎ¶¨Î•º ÏÇ¨Ïö© Ìï† Îïå idea, solution, result 3 Îã®Í≥ÑÎ•º Ï∞®Í∑ºÏ∞®Í∑º Ìï¥Î≥¥Í∏∞ ÏúÑÌï¥ ÏûëÏÑ±ÌïòÏòÄÏäµÎãàÎã§.

> Î¨∏Ï†ú ÌíÄÏù¥ ÏïÑÎûòÏóêÎäî [www.mysqltutorial.org](http://www.mysqltutorial.org/basic-mysql-tutorial.aspx)ÏóêÏÑú ÌïôÏäµÌïòÎ©¥ÏÑú ÌïÑÏöîÌïú ÎÇ¥Ïö©ÏùÑ Ï†ïÎ¶¨ÌïòÏòÄÏäµÎãàÎã§.

### :information_source: DB

mysql 5.6ÏùÑ ÏÑ§ÏπòÌïòÏó¨ Ïó∞ÏäµÌïòÏòÄÏäµÎãàÎã§.
> mysql ÏÑ§ÏπòÎäî Í±¥ÎÑàÎõ∞ÎèÑÎ°ù ÌïòÍ≤†ÏäµÎãàÎã§.

Ïó∞ÏäµÏóê ÌïÑÏöîÌïú DBÎäî [Ïó¨Í∏∞ÏÑú](https://www.w3resource.com/mysql-exercises//) Íµ¨ÌïòÏòÄÏäµÎãàÎã§.
- [HR Database](https://www.w3resource.com/mysql-exercises//db.sql)

### :bookmark: Quiz

QuizÎèÑ ÏúÑÏôÄ ÎèôÏùºÌïú ÌéòÏù¥ÏßÄÏóêÏÑú Íµ¨ÌïòÏòÄÏäµÎãàÎã§.

### üíæ File

Î¨∏ÏÑú ÏûëÏÑ±ÏùÄ NotionÏùÑ Ïù¥Ïö©ÌïòÏó¨ ÏûëÏÑ±ÌïòÏòÄÏäµÎãàÎã§. Í∑∏ ÌõÑ HTML ÌååÏùº, Markdown ÌååÏùºÏùÑ Î∞õÏïÑÏÑú gitÏóê Ï†ïÎ¶¨ÌïòÏòÄÏäµÎãàÎã§.
> Ïó∞ÏäµÏù¥ ÌïÑÏöîÌïòÏã† Î∂ÑÏùÄ HTML ÌååÏùºÏùÑ Îã§Ïö¥ Î∞õÏïÑÏÑú Î≥¥ÏãúÎäî Í±∏ Í∂åÏû• ÎìúÎ¶ΩÎãàÎã§.

### :book: Result

MySQL Basic SELECT statement 19 Exercises
- [html](https://github.com/timetobye/MySQL_basic_practice/tree/master/MySQL%20Basic%20SELECT%20statement%2019%20Exercises)
- [gist](https://gist.github.com/timetobye/e7e8fe3b0b298cc82a8ec456c8b84dec)

MySQL Restricting and Sorting data 11 exercises
- [html](https://github.com/timetobye/MySQL_basic_practice/tree/master/MySQL%20Restricting%20and%20Sorting%20data%20%5B11%20exercises%5D)

Aggregate Functions and Group by 14 exercises
- [html](https://github.com/timetobye/MySQL_basic_practice/tree/master/Aggregate%20Functions%20and%20Group%20by%20%5B14%20exercises%5D)

MySQL Subquery 22 exercises
- [html](https://github.com/timetobye/MySQL_basic_practice/tree/master/MySQL%20Subquery%20%5B22%20exercises%20with%20solution%5D)

MySQL Joins 13 exercises with solution
- [html](https://github.com/timetobye/MySQL_basic_practice/tree/master/MySQL%20Joins%20%5B13%20exercises%20with%20solution%5D)


**thanks to**
- sqlÏùÑ ÌôúÏö©Ìï¥ÏÑú Î©ãÏßÄÍ≤å ÏùºÌïòÏãúÎäî ÎÇòÏùò ÎèôÎ£å DDÎãò Í∞êÏÇ¨Ìï©ÎãàÎã§.
- sql Í≥†ÎØº Ìï† Îïå Ïù¥Í±∞ Î≥¥ÏÑ∏Ïöî ÌïòÍ≥† ÎßÅÌÅ¨ Í±¥ÎÑ§Ï£ºÏÖ®Îçò G.S ParkÏóêÍ≤åÎèÑ Í∞êÏÇ¨Ìï©ÎãàÎã§.
--------------------------


MySQL ÌïôÏäµ
--------------------------

# mysql ÌïôÏäµ
- mysql ÌïôÏäµ ÌïòÎ©¥ÏÑú Î∞∞Ïö¥ ÎÇ¥Ïö©ÏùÑ Ï†ÅÏñ¥ ÎëêÏóàÏäµÎãàÎã§.
- ÌïôÏäµ ÎßÅÌÅ¨ : [www.mysqltutorial.org](http://www.mysqltutorial.org/basic-mysql-tutorial.aspx)

## mysql Ï†ïÎ¶¨
- Î™®Î•¥Îäî Í≤É, ÏÉàÎ°≠Í≤å ÏïåÍ≤å Îêú Í≤É, Ïï†Îß§ÌïòÍ≤å ÏïåÍ≥† ÏûàÎäî Í≤ÉÏùÑ Ï†ÅÎäîÎã§.

### odrer by
- ÏïÑÎûòÏôÄ Í∞ôÏùÄ Í≤ÉÏùÑ ÏÉàÎ°≠Í≤å Î∞∞Ïõ†Îã§.

```
SELECT 
    orderNumber, status
FROM
    orders
ORDER BY FIELD(status,
        'In Process',
        'On Hold',
        'Cancelled',
        'Resolved',
        'Disputed',
        'Shipped');
```

- ÌäπÏ†ï ÏπºÎüºÏùÑ ÏßÄÏ†ïÌïòÏó¨ ÏπºÎüº ÎÇ¥ Í∞íÎì§ÏùÑ ÏûÑÏùòÎåÄÎ°ú ÏàúÏÑú Ï°∞Ï†ï Ìï† Ïàò ÏûàÎã§.
- Ïù¥Î†áÍ≤å ÌïòÎ©¥ Ï†ïÎ†¨ÏùÑ ÏûêÏú†ÏûêÏû¨Î°ú Ìï† Ïàò ÏûàÎã§.

![Alt text](http://www.mysqltutorial.org/wp-content/uploads/2010/01/MySQL-ORDER-BY-and-FIELD-function.jpg)


### IN VS OR

```
SELECT 
    officeCode, 
    city, 
    phone, 
    country
FROM
    offices
WHERE
    country IN ('USA' , 'France');
```

```
SELECT 
    officeCode, 
    city, 
    phone
FROM
    offices
WHERE
    country = 'USA' OR country = 'France';
```

- In case the list has many values, you need to construct a very long statement with multiple OR operators. Hence, the IN operator allows you to shorten the query and make it more readable.
- Í∞ÄÎèÖÏÑ±Ïùò Ï§ëÏöîÏÑ±

### IN ÏóêÏÑú subqueryÎ•º ÏÇ¨Ïö©

```
SELECT 
    orderNumber, 
    customerNumber, 
    status, 
    shippedDate
FROM
    orders
WHERE
    orderNumber IN (SELECT 
            orderNumber
        FROM
            orderdetails
        GROUP BY orderNumber
        HAVING SUM(quantityOrdered * priceEach) > 60000);
```

- Íµ¨ÎèôÎ∞©ÏãùÏùÄ ÏïÑÎûòÏôÄ Í∞ôÏùÄ ÏõêÎ¶¨Î°ú ÏßÑÌñâÎêòÏóàÎã§.
```
SELECT 
    orderNumber, 
    customerNumber, 
    status, 
    shippedDate
FROM
    orders
WHERE
    orderNumber IN (10165,10287,10310);
```

### between

- between ÏóêÏÑú notÏùÄ Ïù¥Î†áÍ≤å ÏÇ¨Ïö©ÌïúÎã§.

```
select 
	productcode,
    productname,
    buyprice
From
	products
where
	buyprice not between 90 and 100;
```

- betweenÏùÄ Í≤ΩÍ≥Ñ Í∞íÏóê ÎåÄÌï¥ ÏÉùÍ∞ÅÌï¥Î≥¥Í≥† Ïç®Ïïº ÌïúÎã§.
  - ÏòàÎ•º Îì§Î©¥ ÏãúÍ∞Ñ Í≥ÑÏÇ∞, ÎÇ†Ïßú Í≥ÑÏÇ∞
  - [Q&A](https://stackoverflow.com/questions/749615/does-ms-sql-servers-between-include-the-range-boundaries/749663)
  

### between with cast

- When you use the BETWEEN operator with date values, to get the best result, you should use the type cast to explicitly convert the type of column or expression to the DATE type.

- For example, to get the orders whose required dates are from 01/01/2003 to 01/31/2003, you use the following query:

```
SELECT 
   orderNumber,
   requiredDate,
   status
FROM 
   orders
WHERE 
   requireddate BETWEEN 
     CAST('2003-01-01' AS DATE) AND 
     CAST('2003-01-31' AS DATE);
```

![alt text](http://www.mysqltutorial.org/wp-content/uploads/2009/12/MySQL-BEETWEEN-with-Dates-Example.png)

- Because the data type of the required date column is DATE so we used the cast operator to convert the literal strings ‚Äò2003-01-01 ‚Äò and ‚Äò2003-12-31 ‚Äò to the DATE data type.

- **convert the literal strings ‚Äò2003-01-01 ‚Äò and ‚Äò2003-12-31 ‚Äò to the DATE data type.**


### LIKE

```
SELECT 
    employeeNumber, 
    lastName, 
    firstName
FROM
    employees
WHERE
    firstname LIKE 'T_m';
```

![alt text](http://www.mysqltutorial.org/wp-content/uploads/2009/12/mysql-like-with-_-pattern.png)

- 'T_M Ïù¥Î†áÍ≤å ÌïòÎ©¥ Tom, Tim Îì± ÏùºÏπòÌïòÎäî Î¨∏ÏûêÏó¥ Í≤ÄÏÉâ Í∞ÄÎä•

- not likeÎèÑ ÏÇ¨Ïö© Í∞ÄÎä•
```
select
	employeeNumber,
    lastname,
    firstname
from employees
where lastname not Like 'B%'
```

#### escape in LIKE

- ÏõêÎûò '\'Îßå ÎêòÎäî Ï§Ñ ÏïåÏïòÎã§.(ÎîîÌè¥Ìä∏ Í∞íÏù¥Îã§.)
- Í∑∏Îü∞Îç∞ escapeÎ•º ÏßÄÏ†ïÌïòÎ©¥ Í∑∏ Î¨∏ÏûêÏó¥ÎèÑ ÏßÄÏ†ïÌï† Ïàò ÏûàÎã§.

- For example, if you want to find product whose product code contains string _20 , you can use the pattern %\_20% as the following query:

```
SELECT 
    productCode, 
    productName
FROM
    products
WHERE
    productCode LIKE '%\_20%';
```

```
SELECT 
    productCode, 
    productName
FROM
    products
WHERE
    productCode LIKE '%$_20%' ESCAPE '$';
```

![alt text](http://www.mysqltutorial.org/wp-content/uploads/2009/12/MySQL-LIKE-ESCAPE-example.png)


### NullÏóê ÎåÄÌïú Ïù¥Ìï¥

```
value IS NULL
```

If the value is NULL, the expression returns true. Otherwise, it returns false.

Note that MySQL does not have the built-in BOOLEAN type. It uses the TINYINT(1) to represent the BOOLEAN values i.e.,  true means 1 and false means 0.

```
SELECT 1 IS NULL,  -- 0
       0 IS NULL,  -- 0
       NULL IS NULL; -- 1
```

```
SELECT 1 IS NOT NULL, -- 1
       0 IS NOT NULL, -- 1
       NULL IS NOT NULL; -- 0
```


- http://www.mysqltutorial.org/mysql-is-null/
  - ÏúÑ Î∂ÄÎ∂ÑÏù¥ Ïù¥Ìï¥Í∞Ä Ïûò ÎêòÏßÄ ÏïäÏïòÎã§.
  - Ïù¥Ìï¥Í∞Ä ÎêòÎ©¥ ÏóÖÎç∞Ïù¥Ìä∏ Ìï† Í≤É
  
### exists

- Introduction to MySQL EXISTS operator
The EXISTS operator is a Boolean operator that returns either true or false. The EXISTS operator is often used the in a subquery to test for an ‚Äúexist‚Äù condition.

- where, update Îì± Îã§ÏñëÌïòÍ≤å ÏÇ¨Ïö©
- ÏÑúÎ∏åÏøºÎ¶¨ Ìï† Îïå ÎèÑ ÏÇ¨Ïö©

```
select customernumber, customername
from customers
where
	exists(
    select 1
    from orders
    where orders.customernumber = customers.customernumber);
```
 
 
- sql Ï≤´Í±∏Ïùå Ï±ÖÏóêÏÑúÎèÑ Î≥∏ ÎÇ¥Ïö©Ïù¥Îã§. Îëê Í∞úÏùò tableÏóêÏÑú Í∞ÄÏ†∏Ïò® Í±∏ ÎπÑÍµêÌï† ÎïåÎäî table0.column = table1.column

```
SELECT 
    employeenumber, firstname, lastname, extension
FROM
    employees
WHERE
    EXISTS( SELECT 
            1
        FROM
            offices
        WHERE
            city = 'San Francisco'
                AND offices.officeCode = employees.officeCode);
```
  
- select 1 ÏùÄ Ïôú Ïì∏Íπå?
  - http://blog.naver.com/PostView.nhn?blogId=aidpost123&logNo=110180721327&parentCategoryNo=9&categoryNo=&viewDate=&isShowPopularPosts=true&from=search

```
Select 1 from table

ÏúÑÏ≤òÎüº select Ï†àÏóê 1Ïù¥ Ïò§Îäî Í≤ÉÏùÄ Ìï¥Îãπ ÌÖåÏù¥Î∏îÏùò Ïà´ÏûêÎßåÌÅº 1Ïùò ÌñâÏùÑ ÎßåÎì§Ïñ¥ ÎÇ∏Îã§.

Ï¶â table Ïùò Îç∞Ïù¥ÌÑ∞ÏàòÍ∞Ä NÍ∞úÎ©¥ 1Ïù¥ NÌñâÏóê Í±∞Ï≥êÏÑú Î∞òÌôòÎêúÎã§.

Ïù¥Í≤ÉÏù¥ Ï§ëÏöîÌïú Ïù¥Ïú†Îäî 1ÏùÄ TRUEÏùò Îã§Î•∏ ÎßêÏù¥Í∏∞ ÎïåÎ¨∏Ïù¥Îã§.

Í∑∏ÎûòÏÑú Î≥¥ÌÜµ WHERE Ï†àÏùò (NOT) EXISTS ÏïàÏùò ÎÇ¥Ìè¨ SELECT Î¨∏ÏúºÎ°ú ÏÇ¨Ïö©ÎêúÎã§.

ÎòêÌïú SELECT * FROM TABLE Ïù¥ÎÇò SELECT 1 FROM TABLEÏù¥ÎÇò ÎÖºÎ¶¨ÏãùÏúºÎ°ú ÏÇ¨Ïö©Îê† ÎïåÎäî Ï°¥Ïû¨Ïú†Î¨¥Í∞Ä Ï§ëÏöîÌïòÍ∏∞ ÎïåÎ¨∏Ïóê Î≥¥Îã§ Í∞ÑÎã®ÌïòÍ≤å ÏÇ¨Ïö©ÌïòÎ†§Î©¥ SELECT 1 FROM TABLEÏùÑ ÏÇ¨Ïö©ÌïòÏßÄÎßå Ï†ëÍ∑ºÏóê ÎåÄÌïú Ï†ïÌôïÏÑ±ÏùÄ Îñ®Ïñ¥Ïßà Ïàò Î∞ñÏóê ÏóÜÎã§.
```

- exists ÏòàÏ†úÎäî Ïñ¥Î†§ÏõåÏÑú ÎßÅÌÅ¨Î°ú ÎåÄÏ≤¥ÌïúÎã§.
- ÌïµÏã¨ÏùÄ 1ÏùÑ Î∞òÌôòÌïòÎäî Í≤ÉÏù¥ TrueÏù¥Î©∞ Í≤∞Í≥ºÏóê Îß§Ïπ≠ÏãúÌÇ®Îã§.
- http://www.mysqltutorial.org/mysql-exists/


#### update in exists

```
update employees
set extension = concat(extension,'1')
where
	exists(
    select 1
    from offices
    where
    city = 'San Francisco'
    and offices.officeCode = employees.officeCode);
```

```
select * from employees
inner join offices on offices.officeCode = employees.officeCode
```

- extensionÏù¥ÎùºÎäî Ìï≠Î™©Ïóê 1ÏùÑ Ï∂îÍ∞Ä Ìï¥Ïïº ÌïòÎäîÎç∞ exitstsÎ•º Ïù¥Ïö©ÌïòÏó¨ employeesÎùºÎäî Ìï≠Î™©Ïóê 1ÏùÑ ÎÑ£ÏóàÎã§.

#### in vs exists

- exists(Ï≤´Î≤àÏß∏ Í∑∏Î¶º), IN(ÎëêÎ≤àÏß∏ Í∑∏Î¶º)

![alt text](http://www.mysqltutorial.org/wp-content/uploads/2016/01/MySQL-EXISTS-vs-IN-EXISTS-performance.jpg)

![alt text](http://www.mysqltutorial.org/wp-content/uploads/2016/01/MySQL-EXISTS-vs-IN-IN-performance.jpg)


- ÌïòÏúÑ ÏøºÎ¶¨Í∞Ä ÎßéÏùÑ ÏàòÎ°ù inÏù¥ ÎäêÎ¶¨Îã§.
- ÌíÄÏä§Ï∫îÌï¥Ïïº ÌïòÍ∏∞ ÎïåÎ¨∏Ïù¥Îã§.
- Ï†ÅÏúºÎ©¥ inÏù¥ ÎÇ´Îã§.
- http://yahwang.tk/posts/35


### order by

- Î¨∏ÏûêÏôÄ Ïà´ÏûêÍ∞Ä Ìï®Íªò ÏÑûÏó¨ ÏûàÎäî Í≤ΩÏö∞Ïùò Ï†ïÎ†¨ÏùÄ Ïñ¥ÎñªÍ≤å ÌïòÎ©¥ Ï¢ãÏùÑÍπå?

![alt text](http://www.mysqltutorial.org/wp-content/uploads/2014/01/MySQL-Natural-Sorting-Example.jpg)
![alt text](http://www.mysqltutorial.org/wp-content/uploads/2014/01/MySQL-Natural-Sorting-Example-correct-order.jpg)

- ÎëêÎ≤àÏû¨ Í∑∏Î¶ºÏùÑ Í∏∞ÎåÄÌïòÏòÄÎã§.

```
SELECT 
    item_no
FROM
    items
ORDER BY CAST(item_no AS UNSIGNED) , item_no;
```
- item_noÏùò Îç∞Ïù¥ÌÑ∞Î•º castÎ•º ÏÇ¨Ïö©ÌïòÏó¨ Î∂ÄÌò∏ÏóÜÎäî Ï†ïÏàòÎ°ú Î≥ÄÌôò
- Í∑∏ Îã§Ïùå Ï†ïÎ†¨

```
TRUNCATE TABLE items;
 
INSERT INTO items(item_no)
VALUES('A-1'),
      ('A-2'),
      ('A-3'),
      ('A-4'),
      ('A-5'),
      ('A-10'),
      ('A-11'),
      ('A-20'),
      ('A-30');
```

```
SELECT 
    item_no
FROM
    items
ORDER BY item_no;
```

- truncate ÌõÑÏóê ÏúÑÏùò ÏøºÎ¶¨Î•º ÎÇ†Î¶¨Î©¥ ÏïÑÎûòÏôÄ Í∞ôÏùÄ Í≤∞Í≥ºÍ∞Ä Ïïà ÎÇòÏò®Îã§...~~Î≠êÏïº..~~

![alt text](http://www.mysqltutorial.org/wp-content/uploads/2014/01/MySQL-Natural-Sorting-Another-Good-Example.jpg)


#### length Ìï®ÏàòÎ•º Ïù¥Ïö©ÌïòÏó¨ ÏûëÏóÖ

- item_noÏùò Î¨∏ÏûêÏó¥ Í∏∏Ïù¥Î•º Î∞òÌôòÌïú Îã§ÏùåÏóê Í∏∏Ïù¥Î≥ÑÎ°ú Ï†ïÎ†¨
- ÏïÑÏù¥ÎîîÏñ¥ÏùºÎøê Ìï¥Í≤∞Ï±ÖÏùÄ ÏïÑÎãò

```
SELECT 
    item_no
FROM
    items
ORDER BY LENGTH(item_no), item_no;
```

### limit

#### MySQL LIMITÏùÑ ÏÇ¨Ïö©ÌïòÏó¨ n Î≤àÏß∏Î°ú ÎÜíÏùÄ Í∞í ÏñªÍ∏∞

```
SELECT 
    column1, column2,...
FROM
    table
ORDER BY column1 DESC
LIMIT nth-1, count;
```

- offsetÏ≤´ Î≤àÏß∏ ÌñâÏùò Ïò§ÌîÑÏÖãÏùÑ ÏßÄÏ†ï Î∞òÌôòÌïúÎã§. offsetÏ≤´ Î≤àÏß∏ ÌñâÏùò 0Ïù¥ ÏïÑÎãå 1Ïù¥Îã§.
  - countÏµúÎåÄ Ìñâ ÏàòÎ•º Î∞òÌôòÌïòÎèÑÎ°ù ÏßÄÏ†ïÌï©ÎãàÎã§.
  
![alt text](http://www.mysqltutorial.org/wp-content/uploads/2011/03/mysql-limit-offset.jpg)


### inner join

- usingÏùÑ ÏÇ¨Ïö©ÌïòÎ©¥ Í∞ôÏùÄ Í≤∞Í≥ºÎ•º Î∞òÌôòÌïúÎã§.(left, ÎßàÏ∞¨Í∞ÄÏßÄÏù¥Îã§.)
```
SELECT 
    productCode, 
    productName, 
    textDescription
FROM
    products t1
        INNER JOIN
    productlines t2 ON t1.productline = t2.productline;
```
```
SELECT 
    productCode, 
    productName, 
    textDescription
FROM
    products
        INNER JOIN
    productlines USING (productline);
```

### left join

- join ÏóêÏÑú Ï°∞Í±¥ÏùÑ Í±∏ÏúºÎ©¥ Í≤∞Í≥ºÍ∞Ä Îã§Î•¥Í≤å ÎÇòÏò®Îã§.
- whereÏùÑ Îî∞Î°ú Í±∞Îäî Í≤ΩÏö∞, left joinÏóêÏÑú Í±∞Îäî Í≤ΩÏö∞


```
SELECT 
    o.orderNumber, 
    customerNumber, 
    productCode
FROM
    orders o
        LEFT JOIN
    orderDetails USING (orderNumber)
WHERE
    orderNumber = 10123;
```
![alt text](http://www.mysqltutorial.org/wp-content/uploads/2011/05/MySQL-LEFT-JOIN-Condition-in-WHERE-clause.png)

```
SELECT 
    o.orderNumber, 
    customerNumber, 
    productCode
FROM
    orders o
        LEFT JOIN
    orderdetails d ON o.orderNumber = d.orderNumber
        AND o.orderNumber = 10123;
```
![alt text](http://www.mysqltutorial.org/wp-content/uploads/2011/05/MySQL-LEFT-JOIN-Condition-in-ON-clause.png)

### group by, having

- 2018-03-03Ïù¥ÎùºÎäî Îç∞Ïù¥ÌÑ∞Í∞Ä ÏûàÏùÑ Îïå Year, Month, dayÎ•º Ïì∞Î©¥ ÎÖÑ, Ïõî, ÏùºÏùÑ Ï∂îÏ∂úÌï† Ïàò ÏûàÎçîÎùº.

```
SELECT 
    YEAR(orderDate) AS year,
    SUM(quantityOrdered * priceEach) AS total
FROM
    orders
        INNER JOIN
    orderdetails USING (orderNumber)
WHERE
    status = 'Shipped'
GROUP BY YEAR(orderDate);
```

![alt text](http://www.mysqltutorial.org/wp-content/uploads/2011/05/MySQL-GROUP-BY-expression-example.png)

```
SELECT 
    YEAR(orderDate) AS year,
    SUM(quantityOrdered * priceEach) AS total
FROM
    orders
        INNER JOIN
    orderdetails USING (orderNumber)
WHERE
    status = 'Shipped'
GROUP BY YEAR
having year > 2003;
```

![alt text](http://www.mysqltutorial.org/wp-content/uploads/2011/05/MySQL-GROUP-BY-with-HAVING-example.png)


- group by ÏóêÏÑúÎèÑ Ï†ïÎ†¨ÏùÑ Ìï† Ïàò ÏûàÎã§.

```
SELECT 
    status, COUNT(*)
FROM
    orders
GROUP BY status DESC;
```

- havingÏùÑ Ïì∞Îäî ÏòàÎ•º Îçî Ï†ÅÏñ¥Î≥¥ÏïòÎã§.

```
SELECT 
    ordernumber,
    SUM(quantityOrdered) AS itemsCount,
    SUM(priceeach*quantityOrdered) AS total
FROM
    orderdetails
GROUP BY ordernumber
HAVING total > 1000 AND itemsCount > 600;
```

```
SELECT 
    a.ordernumber, status, SUM(priceeach*quantityOrdered) total
FROM
    orderdetails a
        INNER JOIN
    orders b ON b.ordernumber = a.ordernumber
GROUP BY ordernumber, status
HAVING status = 'Shipped' AND total > 1500;
```

### Rollup

- http://www.mysqltutorial.org/mysql-rollup/
- Í∏∞Î≥∏ÏÑúÏóê ÎÇòÏò§ÏßÄ ÏïäÏùÄ ÎÇ¥Ïö©Ïù¥Îã§.
- group by Í≤∞Í≥ºÍ∞Ä ÏûàÏùÑ Îïå Í∑∏ Í∞íÏùò Ï¥ùÌï©ÏùÑ Íµ¨ÌïòÎäî Í≤ÉÍπåÏßÄ ÌïòÎ†§Î©¥ Ïñ¥ÎñªÍ≤å Ìï¥Ïïº Ìï†Íπå?
  - Ìï©ÏÇ∞ Í≤∞Í≥ºÍ∞Ä ÎÇòÏò§Îäî table ÎßåÎì§Ïñ¥ÏÑú union all?
  - Í∑∏Îü¨Î©¥...
  - The query is quite lengthy.
  - The performance of the query may not be good since the database engine has to internally execute two separate queries and combine the result sets into one.
  
```
SELECT 
    select_list
FROM 
    table_name
GROUP BY
    c1, c2, c3 WITH ROLLUP;
```

```
SELECT 
    productLine, 
    SUM(orderValue) totalOrderValue
FROM
    sales
GROUP BY 
    productline WITH ROLLUP;
```

![alt text](http://www.mysqltutorial.org/wp-content/uploads/2018/08/MySQL-ROLLUP-example.png)

- the ROLLUP clause generates not only the subtotals but also the grand total of the order values.
- ~~Ïò§Ïò∑....Ïß±Ïù¥Îã§~~

```
SELECT 
    productLine, 
    orderYear,
    SUM(orderValue) totalOrderValue
FROM
    sales
GROUP BY 
    productline, 
    orderYear 
WITH ROLLUP;
```

![alt text](http://www.mysqltutorial.org/wp-content/uploads/2018/08/MySQL-ROLLUP-hierarchy.png)

- mysql 8.0.12 Î≤ÑÏ†ÑÏóêÏÑúÎäî Îçî Ï¢ãÏùÄ Í∏∞Îä•Ïù¥ ÏûàÏúºÎÇò ÏÑ§Ïπò Ïïà Ìï¥ÏÑú Ìå®Ïä§(rollup ÎßÅÌÅ¨ Ï∞∏Ï°∞)


### DEFAULT CHARSET=utf8

- local DBÏóê csv ÌååÏùºÏùÑ ÎÑ£ÏùÑ Îïå ÌïúÍ∏ÄÏù¥ Íπ®ÏßÄÎäî Í≤ΩÏö∞Í∞Ä Î∞úÏÉùÌïúÎã§.
- Í∑∏Îü¥ Îïå ÏÉùÏÑ±ÌïòÎäî tableÏóê Î™ÖÎ†πÏñ¥Î•º Ï∂îÍ∞ÄÌïòÎ©¥ ÏâΩÍ≤å Î¨∏Ï†úÎ•º Ìï¥Í≤∞ Ìï† Ïàò ÏûàÎã§.

```
create table 'DB name'.'table name' (
'table_name_1' INT(11) unsigned NOT NULL COMMENT 'hihihihi',
'table_name_2' INT(11) unsigned NOT NULL COMMENT 'hihihihi',
'table_name_3' VARCHAR(255) NOT NULL COMMENT 'hihihihi'
) DEFAULT CHARSET=utf8
```

- ÌïúÍ∏ÄÏù¥ Ïûò Îì§Ïñ¥Í∞ÄÎäî Í≤ÉÏùÑ ÌôïÏù∏ Ìï† Ïàò ÏûàÎã§.


### now(), sysdate(), current_date()

- ÏøºÎ¶¨Î•º ÎßåÎì§ Îïå ÌòÑÏû¨ ÎÇ†ÏßúÏôÄ Í¥ÄÎ†®ÌïòÏó¨ Ïñ¥Îñ§ Í≤ÉÏùÑ ÏÇ¨Ïö©Ìï¥Ïïº Ìï†Íπå?
- ÎÇ†ÏßúÎßå ÌïÑÏöîÌïòÎ©¥ current_date(), ÏøºÎ¶¨ ÎÇ†Î¶¨Îäî ÏãúÍ∞ÅÏùò Î≥ÄÌôîÍ∞Ä Î∂àÌïÑÏöîÌïòÎ©¥ now(), Í∞ôÏùÄ ÏøºÎ¶¨Î•º ÎÇ†Î¶¨Îäî Ï§ëÏóêÎèÑ Î≥ÄÌôîÍ∞Ä ÏûàÏúºÎ©¥ sysdate()

```
mysql> select now(), sysdate(), current_date(), sleep(5), now(), sysdate();
+---------------------+---------------------+----------------+----------+---------------------+---------------------+
| now()               | sysdate()           | current_date() | sleep(5) | now()               | sysdate()           |
+---------------------+---------------------+----------------+----------+---------------------+---------------------+
| 2019-05-21 03:11:57 | 2019-05-21 03:11:57 | 2019-05-21     |        0 | 2019-05-21 03:11:57 | 2019-05-21 03:12:02 |
+---------------------+---------------------+----------------+----------+---------------------+---------------------+
1 row in set (5.02 sec)
```

- [Ï∞∏Í≥† ÌéòÏù¥ÏßÄ](https://stackoverflow.com/questions/24137752/difference-between-now-sysdate-current-date-in-mysql)