# MySQL_basic_practice
[![alt text](https://img.shields.io/badge/mysql-5.6-green.svg)](https://dev.mysql.com/doc/relnotes/mysql/5.6/en/)
![alt text](https://img.shields.io/badge/result-idea%26query__solution-blue.svg)
[![alt text](https://img.shields.io/badge/data-web-red.svg)](https://www.w3resource.com/mysql-exercises/)

> ê¸°ì´ˆì ì¸ Mysql Quizì— ëŒ€í•´ idea, solution, resultë¥¼ ì •ë¦¬í•´ë‘ì—ˆìŠµë‹ˆë‹¤. mysqlì„ remind í•˜ê¸° ìœ„í•´ ë§Œë“¤ì—ˆìŠµë‹ˆë‹¤.

> ì–´ë–¤ ë©´ì—ì„œëŠ” ë¬´ì²™ ì‰½ìŠµë‹ˆë‹¤. ì¿¼ë¦¬ë¥¼ ì‚¬ìš© í•  ë•Œ idea, solution, result 3 ë‹¨ê³„ë¥¼ ì°¨ê·¼ì°¨ê·¼ í•´ë³´ê¸° ìœ„í•´ ì‘ì„±í•˜ì˜€ìŠµë‹ˆë‹¤.

> ë¬¸ì œ í’€ì´ ì•„ë˜ì—ëŠ” [www.mysqltutorial.org](http://www.mysqltutorial.org/basic-mysql-tutorial.aspx)ì—ì„œ í•™ìŠµí•˜ë©´ì„œ í•„ìš”í•œ ë‚´ìš©ì„ ì •ë¦¬í•˜ì˜€ìŠµë‹ˆë‹¤.

### :information_source: DB

mysql 5.6ì„ ì„¤ì¹˜í•˜ì—¬ ì—°ìŠµí•˜ì˜€ìŠµë‹ˆë‹¤.
> mysql ì„¤ì¹˜ëŠ” ê±´ë„ˆë›°ë„ë¡ í•˜ê² ìŠµë‹ˆë‹¤.

ì—°ìŠµì— í•„ìš”í•œ DBëŠ” [ì—¬ê¸°ì„œ](https://www.w3resource.com/mysql-exercises//) êµ¬í•˜ì˜€ìŠµë‹ˆë‹¤.
- [HR Database](https://www.w3resource.com/mysql-exercises//db.sql)

### :bookmark: Quiz

Quizë„ ìœ„ì™€ ë™ì¼í•œ í˜ì´ì§€ì—ì„œ êµ¬í•˜ì˜€ìŠµë‹ˆë‹¤.

### ğŸ’¾ File

ë¬¸ì„œ ì‘ì„±ì€ Notionì„ ì´ìš©í•˜ì—¬ ì‘ì„±í•˜ì˜€ìŠµë‹ˆë‹¤. ê·¸ í›„ HTML íŒŒì¼, Markdown íŒŒì¼ì„ ë°›ì•„ì„œ gitì— ì •ë¦¬í•˜ì˜€ìŠµë‹ˆë‹¤.
> ì—°ìŠµì´ í•„ìš”í•˜ì‹  ë¶„ì€ HTML íŒŒì¼ì„ ë‹¤ìš´ ë°›ì•„ì„œ ë³´ì‹œëŠ” ê±¸ ê¶Œì¥ ë“œë¦½ë‹ˆë‹¤.

### :book: Result

MySQL Basic SELECT statement 19 Exercises
- [html](https://github.com/timetobye/MySQL_basic_practice/tree/master/MySQL%20Basic%20SELECT%20statement%2019%20Exercises)
- [gist](https://gist.github.com/timetobye/e7e8fe3b0b298cc82a8ec456c8b84dec)

MySQL Restricting and Sorting data 11 exercises
- [html](https://github.com/timetobye/MySQL_basic_practice/tree/master/MySQL%20Restricting%20and%20Sorting%20data%20%5B11%20exercises%5D)

Aggregate Functions and Group by 14 exercises
- [html](https://github.com/timetobye/MySQL_basic_practice/tree/master/Aggregate%20Functions%20and%20Group%20by%20%5B14%20exercises%5D)

MySQL Subquery 22 exercises
- [html](https://github.com/timetobye/MySQL_basic_practice/tree/master/MySQL%20Subquery%20%5B22%20exercises%20with%20solution%5D)

MySQL Joins 13 exercises with solution
- [html](https://github.com/timetobye/MySQL_basic_practice/tree/master/MySQL%20Joins%20%5B13%20exercises%20with%20solution%5D)


**thanks to**
- sqlì„ í™œìš©í•´ì„œ ë©‹ì§€ê²Œ ì¼í•˜ì‹œëŠ” ë‚˜ì˜ ë™ë£Œ DDë‹˜ ê°ì‚¬í•©ë‹ˆë‹¤.
- sql ê³ ë¯¼ í•  ë•Œ ì´ê±° ë³´ì„¸ìš” í•˜ê³  ë§í¬ ê±´ë„¤ì£¼ì…¨ë˜ G.S Parkì—ê²Œë„ ê°ì‚¬í•©ë‹ˆë‹¤.
--------------------------


MySQL í•™ìŠµ
--------------------------

# mysql í•™ìŠµ
- mysql í•™ìŠµ í•˜ë©´ì„œ ë°°ìš´ ë‚´ìš©ì„ ì ì–´ ë‘ì—ˆìŠµë‹ˆë‹¤.
- í•™ìŠµ ë§í¬ : [www.mysqltutorial.org](http://www.mysqltutorial.org/basic-mysql-tutorial.aspx)

## mysql ì •ë¦¬
- ëª¨ë¥´ëŠ” ê²ƒ, ìƒˆë¡­ê²Œ ì•Œê²Œ ëœ ê²ƒ, ì• ë§¤í•˜ê²Œ ì•Œê³  ìˆëŠ” ê²ƒì„ ì ëŠ”ë‹¤.

### odrer by
- ì•„ë˜ì™€ ê°™ì€ ê²ƒì„ ìƒˆë¡­ê²Œ ë°°ì› ë‹¤.

```
SELECT 
    orderNumber, status
FROM
    orders
ORDER BY FIELD(status,
        'In Process',
        'On Hold',
        'Cancelled',
        'Resolved',
        'Disputed',
        'Shipped');
```

- íŠ¹ì • ì¹¼ëŸ¼ì„ ì§€ì •í•˜ì—¬ ì¹¼ëŸ¼ ë‚´ ê°’ë“¤ì„ ì„ì˜ëŒ€ë¡œ ìˆœì„œ ì¡°ì • í•  ìˆ˜ ìˆë‹¤.
- ì´ë ‡ê²Œ í•˜ë©´ ì •ë ¬ì„ ììœ ìì¬ë¡œ í•  ìˆ˜ ìˆë‹¤.

![Alt text](http://www.mysqltutorial.org/wp-content/uploads/2010/01/MySQL-ORDER-BY-and-FIELD-function.jpg)


### IN VS OR

```
SELECT 
    officeCode, 
    city, 
    phone, 
    country
FROM
    offices
WHERE
    country IN ('USA' , 'France');
```

```
SELECT 
    officeCode, 
    city, 
    phone
FROM
    offices
WHERE
    country = 'USA' OR country = 'France';
```

- In case the list has many values, you need to construct a very long statement with multiple OR operators. Hence, the IN operator allows you to shorten the query and make it more readable.
- ê°€ë…ì„±ì˜ ì¤‘ìš”ì„±

### IN ì—ì„œ subqueryë¥¼ ì‚¬ìš©

```
SELECT 
    orderNumber, 
    customerNumber, 
    status, 
    shippedDate
FROM
    orders
WHERE
    orderNumber IN (SELECT 
            orderNumber
        FROM
            orderdetails
        GROUP BY orderNumber
        HAVING SUM(quantityOrdered * priceEach) > 60000);
```

- êµ¬ë™ë°©ì‹ì€ ì•„ë˜ì™€ ê°™ì€ ì›ë¦¬ë¡œ ì§„í–‰ë˜ì—ˆë‹¤.
```
SELECT 
    orderNumber, 
    customerNumber, 
    status, 
    shippedDate
FROM
    orders
WHERE
    orderNumber IN (10165,10287,10310);
```

### between

- between ì—ì„œ notì€ ì´ë ‡ê²Œ ì‚¬ìš©í•œë‹¤.

```
select 
	productcode,
    productname,
    buyprice
From
	products
where
	buyprice not between 90 and 100;
```

- betweenì€ ê²½ê³„ ê°’ì— ëŒ€í•´ ìƒê°í•´ë³´ê³  ì¨ì•¼ í•œë‹¤.
  - ì˜ˆë¥¼ ë“¤ë©´ ì‹œê°„ ê³„ì‚°, ë‚ ì§œ ê³„ì‚°
  - [Q&A](https://stackoverflow.com/questions/749615/does-ms-sql-servers-between-include-the-range-boundaries/749663)
  

### between with cast

- When you use the BETWEEN operator with date values, to get the best result, you should use the type cast to explicitly convert the type of column or expression to the DATE type.

- For example, to get the orders whose required dates are from 01/01/2003 to 01/31/2003, you use the following query:

```
SELECT 
   orderNumber,
   requiredDate,
   status
FROM 
   orders
WHERE 
   requireddate BETWEEN 
     CAST('2003-01-01' AS DATE) AND 
     CAST('2003-01-31' AS DATE);
```

![alt text](http://www.mysqltutorial.org/wp-content/uploads/2009/12/MySQL-BEETWEEN-with-Dates-Example.png)

- Because the data type of the required date column is DATE so we used the cast operator to convert the literal strings â€˜2003-01-01 â€˜ and â€˜2003-12-31 â€˜ to the DATE data type.

- **convert the literal strings â€˜2003-01-01 â€˜ and â€˜2003-12-31 â€˜ to the DATE data type.**


### LIKE

```
SELECT 
    employeeNumber, 
    lastName, 
    firstName
FROM
    employees
WHERE
    firstname LIKE 'T_m';
```

![alt text](http://www.mysqltutorial.org/wp-content/uploads/2009/12/mysql-like-with-_-pattern.png)

- 'T_M ì´ë ‡ê²Œ í•˜ë©´ Tom, Tim ë“± ì¼ì¹˜í•˜ëŠ” ë¬¸ìì—´ ê²€ìƒ‰ ê°€ëŠ¥

- not likeë„ ì‚¬ìš© ê°€ëŠ¥
```
select
	employeeNumber,
    lastname,
    firstname
from employees
where lastname not Like 'B%'
```

#### escape in LIKE

- ì›ë˜ '\'ë§Œ ë˜ëŠ” ì¤„ ì•Œì•˜ë‹¤.(ë””í´íŠ¸ ê°’ì´ë‹¤.)
- ê·¸ëŸ°ë° escapeë¥¼ ì§€ì •í•˜ë©´ ê·¸ ë¬¸ìì—´ë„ ì§€ì •í•  ìˆ˜ ìˆë‹¤.

- For example, if you want to find product whose product code contains string _20 , you can use the pattern %\_20% as the following query:

```
SELECT 
    productCode, 
    productName
FROM
    products
WHERE
    productCode LIKE '%\_20%';
```

```
SELECT 
    productCode, 
    productName
FROM
    products
WHERE
    productCode LIKE '%$_20%' ESCAPE '$';
```

![alt text](http://www.mysqltutorial.org/wp-content/uploads/2009/12/MySQL-LIKE-ESCAPE-example.png)


### Nullì— ëŒ€í•œ ì´í•´

```
value IS NULL
```

If the value is NULL, the expression returns true. Otherwise, it returns false.

Note that MySQL does not have the built-in BOOLEAN type. It uses the TINYINT(1) to represent the BOOLEAN values i.e.,  true means 1 and false means 0.

```
SELECT 1 IS NULL,  -- 0
       0 IS NULL,  -- 0
       NULL IS NULL; -- 1
```

```
SELECT 1 IS NOT NULL, -- 1
       0 IS NOT NULL, -- 1
       NULL IS NOT NULL; -- 0
```


- http://www.mysqltutorial.org/mysql-is-null/
  - ìœ„ ë¶€ë¶„ì´ ì´í•´ê°€ ì˜ ë˜ì§€ ì•Šì•˜ë‹¤.
  - ì´í•´ê°€ ë˜ë©´ ì—…ë°ì´íŠ¸ í•  ê²ƒ
  
### exists

- Introduction to MySQL EXISTS operator
The EXISTS operator is a Boolean operator that returns either true or false. The EXISTS operator is often used the in a subquery to test for an â€œexistâ€ condition.

- where, update ë“± ë‹¤ì–‘í•˜ê²Œ ì‚¬ìš©
- ì„œë¸Œì¿¼ë¦¬ í•  ë•Œ ë„ ì‚¬ìš©

```
select customernumber, customername
from customers
where
	exists(
    select 1
    from orders
    where orders.customernumber = customers.customernumber);
```
 
 
- sql ì²«ê±¸ìŒ ì±…ì—ì„œë„ ë³¸ ë‚´ìš©ì´ë‹¤. ë‘ ê°œì˜ tableì—ì„œ ê°€ì ¸ì˜¨ ê±¸ ë¹„êµí•  ë•ŒëŠ” table0.column = table1.column

```
SELECT 
    employeenumber, firstname, lastname, extension
FROM
    employees
WHERE
    EXISTS( SELECT 
            1
        FROM
            offices
        WHERE
            city = 'San Francisco'
                AND offices.officeCode = employees.officeCode);
```
  
- select 1 ì€ ì™œ ì“¸ê¹Œ?
  - http://blog.naver.com/PostView.nhn?blogId=aidpost123&logNo=110180721327&parentCategoryNo=9&categoryNo=&viewDate=&isShowPopularPosts=true&from=search

```
Select 1 from table

ìœ„ì²˜ëŸ¼ select ì ˆì— 1ì´ ì˜¤ëŠ” ê²ƒì€ í•´ë‹¹ í…Œì´ë¸”ì˜ ìˆ«ìë§Œí¼ 1ì˜ í–‰ì„ ë§Œë“¤ì–´ ë‚¸ë‹¤.

ì¦‰ table ì˜ ë°ì´í„°ìˆ˜ê°€ Nê°œë©´ 1ì´ Ní–‰ì— ê±°ì³ì„œ ë°˜í™˜ëœë‹¤.

ì´ê²ƒì´ ì¤‘ìš”í•œ ì´ìœ ëŠ” 1ì€ TRUEì˜ ë‹¤ë¥¸ ë§ì´ê¸° ë•Œë¬¸ì´ë‹¤.

ê·¸ë˜ì„œ ë³´í†µ WHERE ì ˆì˜ (NOT) EXISTS ì•ˆì˜ ë‚´í¬ SELECT ë¬¸ìœ¼ë¡œ ì‚¬ìš©ëœë‹¤.

ë˜í•œ SELECT * FROM TABLE ì´ë‚˜ SELECT 1 FROM TABLEì´ë‚˜ ë…¼ë¦¬ì‹ìœ¼ë¡œ ì‚¬ìš©ë  ë•ŒëŠ” ì¡´ì¬ìœ ë¬´ê°€ ì¤‘ìš”í•˜ê¸° ë•Œë¬¸ì— ë³´ë‹¤ ê°„ë‹¨í•˜ê²Œ ì‚¬ìš©í•˜ë ¤ë©´ SELECT 1 FROM TABLEì„ ì‚¬ìš©í•˜ì§€ë§Œ ì ‘ê·¼ì— ëŒ€í•œ ì •í™•ì„±ì€ ë–¨ì–´ì§ˆ ìˆ˜ ë°–ì— ì—†ë‹¤.
```

- exists ì˜ˆì œëŠ” ì–´ë ¤ì›Œì„œ ë§í¬ë¡œ ëŒ€ì²´í•œë‹¤.
- í•µì‹¬ì€ 1ì„ ë°˜í™˜í•˜ëŠ” ê²ƒì´ Trueì´ë©° ê²°ê³¼ì— ë§¤ì¹­ì‹œí‚¨ë‹¤.
- http://www.mysqltutorial.org/mysql-exists/


#### update in exists

```
update employees
set extension = concat(extension,'1')
where
	exists(
    select 1
    from offices
    where
    city = 'San Francisco'
    and offices.officeCode = employees.officeCode);
```

```
select * from employees
inner join offices on offices.officeCode = employees.officeCode
```

- extensionì´ë¼ëŠ” í•­ëª©ì— 1ì„ ì¶”ê°€ í•´ì•¼ í•˜ëŠ”ë° exitstsë¥¼ ì´ìš©í•˜ì—¬ employeesë¼ëŠ” í•­ëª©ì— 1ì„ ë„£ì—ˆë‹¤.

#### in vs exists

- exists(ì²«ë²ˆì§¸ ê·¸ë¦¼), IN(ë‘ë²ˆì§¸ ê·¸ë¦¼)

![alt text](http://www.mysqltutorial.org/wp-content/uploads/2016/01/MySQL-EXISTS-vs-IN-EXISTS-performance.jpg)

![alt text](http://www.mysqltutorial.org/wp-content/uploads/2016/01/MySQL-EXISTS-vs-IN-IN-performance.jpg)


- í•˜ìœ„ ì¿¼ë¦¬ê°€ ë§ì„ ìˆ˜ë¡ inì´ ëŠë¦¬ë‹¤.
- í’€ìŠ¤ìº”í•´ì•¼ í•˜ê¸° ë•Œë¬¸ì´ë‹¤.
- ì ìœ¼ë©´ inì´ ë‚«ë‹¤.
- http://yahwang.tk/posts/35


### order by

- ë¬¸ìì™€ ìˆ«ìê°€ í•¨ê»˜ ì„ì—¬ ìˆëŠ” ê²½ìš°ì˜ ì •ë ¬ì€ ì–´ë–»ê²Œ í•˜ë©´ ì¢‹ì„ê¹Œ?

![alt text](http://www.mysqltutorial.org/wp-content/uploads/2014/01/MySQL-Natural-Sorting-Example.jpg)
![alt text](http://www.mysqltutorial.org/wp-content/uploads/2014/01/MySQL-Natural-Sorting-Example-correct-order.jpg)

- ë‘ë²ˆì¬ ê·¸ë¦¼ì„ ê¸°ëŒ€í•˜ì˜€ë‹¤.

```
SELECT 
    item_no
FROM
    items
ORDER BY CAST(item_no AS UNSIGNED) , item_no;
```
- item_noì˜ ë°ì´í„°ë¥¼ castë¥¼ ì‚¬ìš©í•˜ì—¬ ë¶€í˜¸ì—†ëŠ” ì •ìˆ˜ë¡œ ë³€í™˜
- ê·¸ ë‹¤ìŒ ì •ë ¬

```
TRUNCATE TABLE items;
 
INSERT INTO items(item_no)
VALUES('A-1'),
      ('A-2'),
      ('A-3'),
      ('A-4'),
      ('A-5'),
      ('A-10'),
      ('A-11'),
      ('A-20'),
      ('A-30');
```

```
SELECT 
    item_no
FROM
    items
ORDER BY item_no;
```

- truncate í›„ì— ìœ„ì˜ ì¿¼ë¦¬ë¥¼ ë‚ ë¦¬ë©´ ì•„ë˜ì™€ ê°™ì€ ê²°ê³¼ê°€ ì•ˆ ë‚˜ì˜¨ë‹¤...~~ë­ì•¼..~~

![alt text](http://www.mysqltutorial.org/wp-content/uploads/2014/01/MySQL-Natural-Sorting-Another-Good-Example.jpg)


#### length í•¨ìˆ˜ë¥¼ ì´ìš©í•˜ì—¬ ì‘ì—…

- item_noì˜ ë¬¸ìì—´ ê¸¸ì´ë¥¼ ë°˜í™˜í•œ ë‹¤ìŒì— ê¸¸ì´ë³„ë¡œ ì •ë ¬
- ì•„ì´ë””ì–´ì¼ë¿ í•´ê²°ì±…ì€ ì•„ë‹˜

```
SELECT 
    item_no
FROM
    items
ORDER BY LENGTH(item_no), item_no;
```

### limit

#### MySQL LIMITì„ ì‚¬ìš©í•˜ì—¬ n ë²ˆì§¸ë¡œ ë†’ì€ ê°’ ì–»ê¸°

```
SELECT 
    column1, column2,...
FROM
    table
ORDER BY column1 DESC
LIMIT nth-1, count;
```

- offsetì²« ë²ˆì§¸ í–‰ì˜ ì˜¤í”„ì…‹ì„ ì§€ì • ë°˜í™˜í•œë‹¤. offsetì²« ë²ˆì§¸ í–‰ì˜ 0ì´ ì•„ë‹Œ 1ì´ë‹¤.
  - countìµœëŒ€ í–‰ ìˆ˜ë¥¼ ë°˜í™˜í•˜ë„ë¡ ì§€ì •í•©ë‹ˆë‹¤.
  
![alt text](http://www.mysqltutorial.org/wp-content/uploads/2011/03/mysql-limit-offset.jpg)


### inner join

- usingì„ ì‚¬ìš©í•˜ë©´ ê°™ì€ ê²°ê³¼ë¥¼ ë°˜í™˜í•œë‹¤.(left, ë§ˆì°¬ê°€ì§€ì´ë‹¤.)
```
SELECT 
    productCode, 
    productName, 
    textDescription
FROM
    products t1
        INNER JOIN
    productlines t2 ON t1.productline = t2.productline;
```
```
SELECT 
    productCode, 
    productName, 
    textDescription
FROM
    products
        INNER JOIN
    productlines USING (productline);
```

### left join

- join ì—ì„œ ì¡°ê±´ì„ ê±¸ìœ¼ë©´ ê²°ê³¼ê°€ ë‹¤ë¥´ê²Œ ë‚˜ì˜¨ë‹¤.
- whereì„ ë”°ë¡œ ê±°ëŠ” ê²½ìš°, left joinì—ì„œ ê±°ëŠ” ê²½ìš°


```
SELECT 
    o.orderNumber, 
    customerNumber, 
    productCode
FROM
    orders o
        LEFT JOIN
    orderDetails USING (orderNumber)
WHERE
    orderNumber = 10123;
```
![alt text](http://www.mysqltutorial.org/wp-content/uploads/2011/05/MySQL-LEFT-JOIN-Condition-in-WHERE-clause.png)

```
SELECT 
    o.orderNumber, 
    customerNumber, 
    productCode
FROM
    orders o
        LEFT JOIN
    orderdetails d ON o.orderNumber = d.orderNumber
        AND o.orderNumber = 10123;
```
![alt text](http://www.mysqltutorial.org/wp-content/uploads/2011/05/MySQL-LEFT-JOIN-Condition-in-ON-clause.png)

### group by, having

- 2018-03-03ì´ë¼ëŠ” ë°ì´í„°ê°€ ìˆì„ ë•Œ Year, Month, dayë¥¼ ì“°ë©´ ë…„, ì›”, ì¼ì„ ì¶”ì¶œí•  ìˆ˜ ìˆë”ë¼.

```
SELECT 
    YEAR(orderDate) AS year,
    SUM(quantityOrdered * priceEach) AS total
FROM
    orders
        INNER JOIN
    orderdetails USING (orderNumber)
WHERE
    status = 'Shipped'
GROUP BY YEAR(orderDate);
```

![alt text](http://www.mysqltutorial.org/wp-content/uploads/2011/05/MySQL-GROUP-BY-expression-example.png)

```
SELECT 
    YEAR(orderDate) AS year,
    SUM(quantityOrdered * priceEach) AS total
FROM
    orders
        INNER JOIN
    orderdetails USING (orderNumber)
WHERE
    status = 'Shipped'
GROUP BY YEAR
having year > 2003;
```

![alt text](http://www.mysqltutorial.org/wp-content/uploads/2011/05/MySQL-GROUP-BY-with-HAVING-example.png)


- group by ì—ì„œë„ ì •ë ¬ì„ í•  ìˆ˜ ìˆë‹¤.

```
SELECT 
    status, COUNT(*)
FROM
    orders
GROUP BY status DESC;
```

- havingì„ ì“°ëŠ” ì˜ˆë¥¼ ë” ì ì–´ë³´ì•˜ë‹¤.

```
SELECT 
    ordernumber,
    SUM(quantityOrdered) AS itemsCount,
    SUM(priceeach*quantityOrdered) AS total
FROM
    orderdetails
GROUP BY ordernumber
HAVING total > 1000 AND itemsCount > 600;
```

```
SELECT 
    a.ordernumber, status, SUM(priceeach*quantityOrdered) total
FROM
    orderdetails a
        INNER JOIN
    orders b ON b.ordernumber = a.ordernumber
GROUP BY ordernumber, status
HAVING status = 'Shipped' AND total > 1500;
```

### Rollup

- http://www.mysqltutorial.org/mysql-rollup/
- ê¸°ë³¸ì„œì— ë‚˜ì˜¤ì§€ ì•Šì€ ë‚´ìš©ì´ë‹¤.
- group by ê²°ê³¼ê°€ ìˆì„ ë•Œ ê·¸ ê°’ì˜ ì´í•©ì„ êµ¬í•˜ëŠ” ê²ƒê¹Œì§€ í•˜ë ¤ë©´ ì–´ë–»ê²Œ í•´ì•¼ í• ê¹Œ?
  - í•©ì‚° ê²°ê³¼ê°€ ë‚˜ì˜¤ëŠ” table ë§Œë“¤ì–´ì„œ union all?
  - ê·¸ëŸ¬ë©´...
  - The query is quite lengthy.
  - The performance of the query may not be good since the database engine has to internally execute two separate queries and combine the result sets into one.
  
```
SELECT 
    select_list
FROM 
    table_name
GROUP BY
    c1, c2, c3 WITH ROLLUP;
```

```
SELECT 
    productLine, 
    SUM(orderValue) totalOrderValue
FROM
    sales
GROUP BY 
    productline WITH ROLLUP;
```

![alt text](http://www.mysqltutorial.org/wp-content/uploads/2018/08/MySQL-ROLLUP-example.png)

- the ROLLUP clause generates not only the subtotals but also the grand total of the order values.
- ~~ì˜¤ì˜·....ì§±ì´ë‹¤~~

```
SELECT 
    productLine, 
    orderYear,
    SUM(orderValue) totalOrderValue
FROM
    sales
GROUP BY 
    productline, 
    orderYear 
WITH ROLLUP;
```

![alt text](http://www.mysqltutorial.org/wp-content/uploads/2018/08/MySQL-ROLLUP-hierarchy.png)

- mysql 8.0.12 ë²„ì „ì—ì„œëŠ” ë” ì¢‹ì€ ê¸°ëŠ¥ì´ ìˆìœ¼ë‚˜ ì„¤ì¹˜ ì•ˆ í•´ì„œ íŒ¨ìŠ¤(rollup ë§í¬ ì°¸ì¡°)


### DEFAULT CHARSET=utf8

- local DBì— csv íŒŒì¼ì„ ë„£ì„ ë•Œ í•œê¸€ì´ ê¹¨ì§€ëŠ” ê²½ìš°ê°€ ë°œìƒí•œë‹¤.
- ê·¸ëŸ´ ë•Œ ìƒì„±í•˜ëŠ” tableì— ëª…ë ¹ì–´ë¥¼ ì¶”ê°€í•˜ë©´ ì‰½ê²Œ ë¬¸ì œë¥¼ í•´ê²° í•  ìˆ˜ ìˆë‹¤.

```
create table 'DB name'.'table name' (
'table_name_1' INT(11) unsigned NOT NULL COMMENT 'hihihihi',
'table_name_2' INT(11) unsigned NOT NULL COMMENT 'hihihihi',
'table_name_3' VARCHAR(255) NOT NULL COMMENT 'hihihihi'
) DEFAULT CHARSET=utf8
```

- í•œê¸€ì´ ì˜ ë“¤ì–´ê°€ëŠ” ê²ƒì„ í™•ì¸ í•  ìˆ˜ ìˆë‹¤.


### now(), sysdate(), current_date()

- ì¿¼ë¦¬ë¥¼ ë§Œë“¤ ë•Œ í˜„ì¬ ë‚ ì§œì™€ ê´€ë ¨í•˜ì—¬ ì–´ë–¤ ê²ƒì„ ì‚¬ìš©í•´ì•¼ í• ê¹Œ?
- ë‚ ì§œë§Œ í•„ìš”í•˜ë©´ current_date(), ì¿¼ë¦¬ ë‚ ë¦¬ëŠ” ì‹œê°ì˜ ë³€í™”ê°€ ë¶ˆí•„ìš”í•˜ë©´ now(), ê°™ì€ ì¿¼ë¦¬ë¥¼ ë‚ ë¦¬ëŠ” ì¤‘ì—ë„ ë³€í™”ê°€ ìˆìœ¼ë©´ sysdate()

```
mysql> select now(), sysdate(), current_date(), sleep(5), now(), sysdate();
+---------------------+---------------------+----------------+----------+---------------------+---------------------+
| now()               | sysdate()           | current_date() | sleep(5) | now()               | sysdate()           |
+---------------------+---------------------+----------------+----------+---------------------+---------------------+
| 2019-05-21 03:11:57 | 2019-05-21 03:11:57 | 2019-05-21     |        0 | 2019-05-21 03:11:57 | 2019-05-21 03:12:02 |
+---------------------+---------------------+----------------+----------+---------------------+---------------------+
1 row in set (5.02 sec)
```

- [ì°¸ê³  í˜ì´ì§€](https://stackoverflow.com/questions/24137752/difference-between-now-sysdate-current-date-in-mysql)



### concat_ws vs concat

- concat_wsì™€ concatì˜ ì°¨ì´ë¥¼ ì•„ë˜ì™€ ê°™ë‹¤.
- concat_wsì— ë¬¸ìì—´ì„ ì§€ì •í•˜ë©´ ë‘ê°œì˜ ë¬¸ìì—´ì„ í•©ì¹˜ë©´ì„œ ê·¸ ì‚¬ì´ì— ì§€ì •ëœ ë¬¸ìì—´ì´ ë“¤ì–´ê°„ë‹¤.

```
select concat_ws(', ', last_name, first_name) as full_name
from employees
limit 100;

#,full_name
1,"Facello, Georgi"
2,"Simmel, Bezalel"
3,"Bamford, Parto"
4,"Koblick, Chirstian"
5,"Maliniak, Kyoichi"
6,"Preusig, Anneke"
7,"Zielinski, Tzvetan"
8,"Kalloufi, Saniya"
9,"Peac, Sumant"
```
- ê·¸ë ‡ë‹¤ë©´ 3ê°œì˜ columnì´ ì§€ì •ë˜ë©´...?
```
select concat_ws(', ', last_name, first_name, last_name) as full_name
from employees
limit 100;

#,full_name
1,"Facello, Georgi, Facello"
2,"Simmel, Bezalel, Simmel"
3,"Bamford, Parto, Bamford"
4,"Koblick, Chirstian, Koblick"
5,"Maliniak, Kyoichi, Maliniak"
6,"Preusig, Anneke, Preusig"
7,"Zielinski, Tzvetan, Zielinski"
8,"Kalloufi, Saniya, Kalloufi"
9,"Peac, Sumant, Peac"
```
- ìœ„ì— ì²˜ëŸ¼ ì²˜ìŒì— ì§€ì •ëœ ë¬¸ìê°€ êµ¬ë¶„ìê°€ ëœë‹¤.

- concatì€ í•˜ë‚˜í•˜ë‚˜ì”© ë‹¤ ì§€ì •ì„ í•´ì¤˜ì•¼ í•œë‹¤.
```
select concat(last_name, ', ',first_name) as full_name
from employees
limit 100

#,full_name
1,"Facello, Georgi"
2,"Simmel, Bezalel"
3,"Bamford, Parto"
4,"Koblick, Chirstian"
5,"Maliniak, Kyoichi"
6,"Preusig, Anneke"
7,"Zielinski, Tzvetan"
8,"Kalloufi, Saniya"
9,"Peac, Sumant"
```

### IFNULL

- MySQL IFNULL function is one of the MySQL control flow functions that accepts two arguments and returns the first argument if it is not NULL. Otherwise, the IFNULL function returns the second argument.
```
IFNULL(expression_1,expression_2);
```
- The IFNULL function returns expression_1 if expression_1 is not NULL ; otherwise, it returns expression_2.

```
select ifnull(1, 0);

result : 1
```

```
select ifnull('', 1);

result : ë¹ˆì¹¸ ë‚˜ì˜´ = ''
```

```
select ifnull(null, 'IFNULL_FUNCTION');

result : 'IFNULL_FUNCTION'
```
